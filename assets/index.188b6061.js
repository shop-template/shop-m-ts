import{a as V,d as K,v as se,r as L,at as ce,u as ue,y as d,b as j,B as S,a1 as re,au as ve,av as fe,C as q,a2 as de,a3 as he,T as ge,U as me,e as C,t as z,n as W,k as D,aw as I,_ as U,D as F,p as we,ax as O,w as G,x as ye}from"./index.3aea5e33.js";const[J,M]=V("swipe"),pe={loop:z,width:W,height:W,vertical:Boolean,autoplay:D(0),duration:D(500),touchable:z,lazyRender:Boolean,initialSwipe:D(0),indicatorColor:String,showIndicators:z,stopPropagation:z},Q=Symbol(J);var be=K({name:J,props:pe,emits:["change"],setup(a,{emit:P,slots:h}){const u=se(),e=L({rect:null,width:0,height:0,offset:0,active:0,swiping:!1}),s=ce(),{children:g,linkChildren:_}=ue(Q),i=d(()=>g.length),n=d(()=>e[a.vertical?"height":"width"]),r=d(()=>a.vertical?s.deltaY.value:s.deltaX.value),f=d(()=>e.rect?(a.vertical?e.rect.height:e.rect.width)-n.value*i.value:0),$=d(()=>Math.ceil(Math.abs(f.value)/n.value)),p=d(()=>i.value*n.value),w=d(()=>(e.active+i.value)%i.value),B=d(()=>{const t=a.vertical?"vertical":"horizontal";return s.direction.value===t}),Z=d(()=>{const t={transitionDuration:`${e.swiping?0:a.duration}ms`,transform:`translate${a.vertical?"Y":"X"}(${e.offset}px)`};if(n.value){const l=a.vertical?"height":"width",o=a.vertical?"width":"height";t[l]=`${p.value}px`,t[o]=a[o]?`${a[o]}px`:""}return t}),ee=t=>{const{active:l}=e;return t?a.loop?O(l+t,-1,i.value):O(l+t,0,$.value):l},R=(t,l=0)=>{let o=t*n.value;a.loop||(o=Math.min(o,-f.value));let v=l-o;return a.loop||(v=O(v,f.value,0)),v},m=({pace:t=0,offset:l=0,emitChange:o})=>{if(i.value<=1)return;const{active:v}=e,c=ee(t),T=R(c,l);if(a.loop){if(g[0]&&T!==f.value){const k=T<f.value;g[0].setOffset(k?p.value:0)}if(g[i.value-1]&&T!==0){const k=T>0;g[i.value-1].setOffset(k?-p.value:0)}}e.active=c,e.offset=T,o&&c!==v&&P("change",w.value)},A=()=>{e.swiping=!0,e.active<=-1?m({pace:i.value}):e.active>=i.value&&m({pace:-i.value})},te=()=>{A(),s.reset(),I(()=>{e.swiping=!1,m({pace:-1,emitChange:!0})})},E=()=>{A(),s.reset(),I(()=>{e.swiping=!1,m({pace:1,emitChange:!0})})};let Y;const b=()=>clearTimeout(Y),x=()=>{b(),a.autoplay>0&&i.value>1&&(Y=setTimeout(()=>{E(),x()},+a.autoplay))},y=(t=+a.initialSwipe)=>{if(!u.value)return;const l=()=>{var o,v;if(!U(u)){const c={width:u.value.offsetWidth,height:u.value.offsetHeight};e.rect=c,e.width=+((o=a.width)!=null?o:c.width),e.height=+((v=a.height)!=null?v:c.height)}i.value&&(t=Math.min(i.value-1,t)),e.active=t,e.swiping=!0,e.offset=R(t),g.forEach(c=>{c.setOffset(0)}),x()};U(u)?F().then(l):l()},X=()=>y(e.active);let H;const ae=t=>{!a.touchable||(s.start(t),H=Date.now(),b(),A())},ie=t=>{a.touchable&&e.swiping&&(s.move(t),B.value&&(we(t,a.stopPropagation),m({offset:r.value})))},N=()=>{if(!a.touchable||!e.swiping)return;const t=Date.now()-H,l=r.value/t;if((Math.abs(l)>.25||Math.abs(r.value)>n.value/2)&&B.value){const v=a.vertical?s.offsetY.value:s.offsetX.value;let c=0;a.loop?c=v>0?r.value>0?-1:1:0:c=-Math[r.value>0?"ceil":"floor"](r.value/n.value),m({pace:c,emitChange:!0})}else r.value&&m({pace:0});e.swiping=!1,x()},ne=(t,l={})=>{A(),s.reset(),I(()=>{let o;a.loop&&t===i.value?o=e.active===0?0:t:o=t%i.value,l.immediate?I(()=>{e.swiping=!1}):e.swiping=!1,m({pace:o-e.active,emitChange:!0})})},oe=(t,l)=>{const o=l===w.value,v=o?{backgroundColor:a.indicatorColor}:void 0;return C("i",{style:v,class:M("indicator",{active:o})},null)},le=()=>{if(h.indicator)return h.indicator({active:w.value,total:i.value});if(a.showIndicators&&i.value>1)return C("div",{class:M("indicators",{vertical:a.vertical})},[Array(i.value).fill("").map(oe)])};return j({prev:te,next:E,state:e,resize:X,swipeTo:ne}),_({size:n,props:a,count:i,activeIndicator:w}),S(()=>a.initialSwipe,t=>y(+t)),S(i,()=>y(e.active)),S(()=>a.autoplay,x),S([re,ve],X),S(fe(),t=>{t==="visible"?x():b()}),q(y),de(()=>y(e.active)),he(()=>y(e.active)),ge(b),me(b),()=>{var t;return C("div",{ref:u,class:M()},[C("div",{style:Z.value,class:M("track",{vertical:a.vertical}),onTouchstart:ae,onTouchmove:ie,onTouchend:N,onTouchcancel:N},[(t=h.default)==null?void 0:t.call(h)]),le()])}}});const Pe=G(be),[xe,Te]=V("swipe-item");var Se=K({name:xe,setup(a,{slots:P}){let h;const u=L({offset:0,inited:!1,mounted:!1}),{parent:e,index:s}=ye(Q);if(!e)return;const g=d(()=>{const n={},{vertical:r}=e.props;return e.size.value&&(n[r?"height":"width"]=`${e.size.value}px`),u.offset&&(n.transform=`translate${r?"Y":"X"}(${u.offset}px)`),n}),_=d(()=>{const{loop:n,lazyRender:r}=e.props;if(!r||h)return!0;if(!u.mounted)return!1;const f=e.activeIndicator.value,$=e.count.value-1,p=f===0&&n?$:f-1,w=f===$&&n?0:f+1;return h=s.value===f||s.value===p||s.value===w,h}),i=n=>{u.offset=n};return q(()=>{F(()=>{u.mounted=!0})}),j({setOffset:i}),()=>{var n;return C("div",{class:Te(),style:g.value},[_.value?(n=P.default)==null?void 0:n.call(P):null])}}});const $e=G(Se);export{Pe as S,$e as a};
